<!DOCTYPE html>
<html lang="es" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>Bases de Datos V - Microsoft SQL | oscarzt20</title>
<meta name="keywords" content="enciclopedia">
<meta name="description" content="
I. Microsoft SQL
El SQL (Lenguaje Estructurado de Consultas) es un lenguaje declarativo basado en el modelo relacional, es decir, se indican instrucciones y la acción que realizarán sobre una base de datos relacional.
1.1 Categorías de SQL

Lenguaje de definición de datos (DDL, Data Definition Language): Son instrucciones que se utilizan para crear, modificar y borrar objetos de la base de datos, como tablas, vistas, esquemas, dominios, activadores y procedimientos almacenados.
Lenguaje de control de datos (DCL, Data Control Language): Son instrucciones que permiten controlar quién o qué tiene acceso a objetos específicos de la base de datos. Dentro de estas instrucciones se pueden encontrar aquellas asociadas a la administración de usuarios, para otorgar o revocar permisos a objetos de las bases de datos.
Lenguaje de manipulación de datos (DML, Data Manipulation Language): Son instrucciones que se utilizan para recuperar, agregar, modificar y borrar datos almacenados en la base de datos.

1.2 Instalación y uso

En la página Microsoft SQL se elige la versión express, instalación personalizada, instalar, New standalone installation, aceptar e instalar
Quitar selección de Azure, y Machine Learning y todo next
Install SQL server management tools, Descargar los ssms
Cerrar todo y abrir SQL Server Management Studio 20
Colocar opcional, y conectar
Al abrir dar conectar
En la barra, New Query
Seleccionar primera línea (CREATE DATABASE mydb;) y Execute, lo mismo con la segunda línea (Use mydb;)

Notas de programar en SQL

Declarar cada FK como una variable más
Ejecutar cada tabla, primero escribir y ejecutar las tablas de las que otras dependen
Cada insert debe seguir la jerarquía con la que se crearon las tablas
Si se puso una numeración automática (IDENTITY(1,1)) en el id de una tabla, cuando se inserten datos no se colocan los id. Si es foránea si se pone, para saber con quién se conecta.

II. Configuraciones de SQL Server
2.1 Creación de diagramas

Crear la base de datos
Buscar la DB dentro de la lista de la carpeta databases en el lado izquierdo y expandir
Expandir la carpeta de database diagram y aceptar el mensaje
click derecho en esa misma carpeta y seleccionar añadir
Seleccionar todas las tablas al mismo tiempo y seleccionar add

2.2 Backups
En SQL, los respaldos son una parte esencial, ya que permiten recuperar los datos en caso de fallos o pérdidas.">
<meta name="author" content="Oscar Juarez">
<link rel="canonical" href="http://localhost:1313/apuntes/bases-de-datos-v---microsoft-sql/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.81c898f5a2238b061825acde445de1b10e9825286bc566504cbb22ca1b9d1f73.css" integrity="sha256-gciY9aIjiwYYJazeRF3hsQ6YJShrxWZQTLsiyhudH3M=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="es" href="http://localhost:1313/apuntes/bases-de-datos-v---microsoft-sql/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="oscarzt20 (Alt + H)">oscarzt20</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/proyectos/" title="Portafolio">
                    <span>Portafolio</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/archives/" title="Archivo">
                    <span>Archivo</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://localhost:1313/">Inicio</a>&nbsp;»&nbsp;<a href="http://localhost:1313/apuntes/">Apuntes</a></div>
    <h1 class="post-title entry-hint-parent">
      Bases de Datos V - Microsoft SQL
    </h1>
    <div class="post-meta"><span title='2025-08-08 00:00:00 +0000 UTC'>agosto 8, 2025</span>&nbsp;·&nbsp;Oscar Juarez

</div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Tabla de Contenidos</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#i-microsoft-sql" aria-label="I. Microsoft SQL">I. Microsoft SQL</a><ul>
                        
                <li>
                    <a href="#11-categor%c3%adas-de-sql" aria-label="1.1 Categorías de SQL">1.1 Categorías de SQL</a></li>
                <li>
                    <a href="#12-instalaci%c3%b3n-y-uso" aria-label="1.2 Instalación y uso">1.2 Instalación y uso</a><ul>
                        
                <li>
                    <a href="#notas-de-programar-en-sql" aria-label="Notas de programar en SQL">Notas de programar en SQL</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#ii-configuraciones-de-sql-server" aria-label="II. Configuraciones de SQL Server">II. Configuraciones de SQL Server</a><ul>
                        
                <li>
                    <a href="#21-creaci%c3%b3n-de-diagramas" aria-label="2.1 Creación de diagramas">2.1 Creación de diagramas</a></li>
                <li>
                    <a href="#22-backups" aria-label="2.2 Backups">2.2 Backups</a></li>
                <li>
                    <a href="#23-creaci%c3%b3n-de-usuarios-y-permisos" aria-label="2.3 Creación de usuarios y permisos">2.3 Creación de usuarios y permisos</a></li>
                <li>
                    <a href="#24-consideraciones-de-una-bd-en-producci%c3%b3n" aria-label="2.4 Consideraciones de una BD en producción">2.4 Consideraciones de una BD en producción</a></li></ul>
                </li>
                <li>
                    <a href="#-m%c3%a1s-informaci%c3%b3n" aria-label="/ Más Información">/ Más Información</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><hr>
<h2 id="i-microsoft-sql">I. Microsoft SQL<a hidden class="anchor" aria-hidden="true" href="#i-microsoft-sql">#</a></h2>
<p>El SQL (Lenguaje Estructurado de Consultas) es un lenguaje declarativo basado en el modelo relacional, es decir, se indican instrucciones y la acción que realizarán sobre una base de datos relacional.</p>
<h3 id="11-categorías-de-sql">1.1 Categorías de SQL<a hidden class="anchor" aria-hidden="true" href="#11-categorías-de-sql">#</a></h3>
<ul>
<li><strong>Lenguaje de definición de datos (DDL, Data Definition Language)</strong>: Son instrucciones que se utilizan para crear, modificar y borrar objetos de la base de datos, como tablas, vistas, esquemas, dominios, activadores y procedimientos almacenados.</li>
<li><strong>Lenguaje de control de datos (DCL, Data Control Language)</strong>: Son instrucciones que permiten controlar quién o qué tiene acceso a objetos específicos de la base de datos. Dentro de estas instrucciones se pueden encontrar aquellas asociadas a la administración de usuarios, para otorgar o revocar permisos a objetos de las bases de datos.</li>
<li><strong>Lenguaje de manipulación de datos (DML, Data Manipulation Language)</strong>: Son instrucciones que se utilizan para recuperar, agregar, modificar y borrar datos almacenados en la base de datos.</li>
</ul>
<h3 id="12-instalación-y-uso">1.2 Instalación y uso<a hidden class="anchor" aria-hidden="true" href="#12-instalación-y-uso">#</a></h3>
<ol>
<li>En la página Microsoft SQL se elige la versión express, instalación personalizada, instalar, New standalone installation, aceptar e instalar</li>
<li>Quitar selección de Azure, y Machine Learning y todo next</li>
<li>Install SQL server management tools, Descargar los ssms</li>
<li>Cerrar todo y abrir SQL Server Management Studio 20</li>
<li>Colocar opcional, y conectar</li>
<li>Al abrir dar conectar</li>
<li>En la barra, New Query</li>
<li>Seleccionar primera línea (CREATE DATABASE mydb;) y Execute, lo mismo con la segunda línea (Use mydb;)</li>
</ol>
<h4 id="notas-de-programar-en-sql">Notas de programar en SQL<a hidden class="anchor" aria-hidden="true" href="#notas-de-programar-en-sql">#</a></h4>
<ul>
<li>Declarar cada FK como una variable más</li>
<li>Ejecutar cada tabla, primero escribir y ejecutar las tablas de las que otras dependen</li>
<li>Cada insert debe seguir la jerarquía con la que se crearon las tablas</li>
<li>Si se puso una numeración automática (IDENTITY(1,1)) en el id de una tabla, cuando se inserten datos no se colocan los id. Si es foránea si se pone, para saber con quién se conecta.</li>
</ul>
<h2 id="ii-configuraciones-de-sql-server">II. Configuraciones de SQL Server<a hidden class="anchor" aria-hidden="true" href="#ii-configuraciones-de-sql-server">#</a></h2>
<h3 id="21-creación-de-diagramas">2.1 Creación de diagramas<a hidden class="anchor" aria-hidden="true" href="#21-creación-de-diagramas">#</a></h3>
<ol>
<li>Crear la base de datos</li>
<li>Buscar la DB dentro de la lista de la carpeta databases en el lado izquierdo y expandir</li>
<li>Expandir la carpeta de database diagram y aceptar el mensaje</li>
<li>click derecho en esa misma carpeta y seleccionar añadir</li>
<li>Seleccionar todas las tablas al mismo tiempo y seleccionar add</li>
</ol>
<h3 id="22-backups">2.2 Backups<a hidden class="anchor" aria-hidden="true" href="#22-backups">#</a></h3>
<p>En SQL, los respaldos son una parte esencial, ya que permiten recuperar los datos en caso de fallos o pérdidas.</p>
<p>Existen 2 formas de generar un archivo de backup:</p>
<p>Mediante el gestor:</p>
<ol>
<li>Crear la base de datos</li>
<li>Buscar la DB dentro de la lista de la carpeta databases en el lado izquierdo</li>
<li>Click derecho en la base de datos, Task, Backup</li>
<li>Configurar el tipo los componentes y el lugar donde se guardará, etc.</li>
</ol>
<p>Mediante un comando:</p>
<pre tabindex="0"><code>BACKUP DATABASE PaleteriaLaMichoacana TO DISK = &#39;C:\empresa.bak&#39;;
</code></pre><h3 id="23-creación-de-usuarios-y-permisos">2.3 Creación de usuarios y permisos<a hidden class="anchor" aria-hidden="true" href="#23-creación-de-usuarios-y-permisos">#</a></h3>
<p>Dentro de SQL es posible crear usuarios y asignarle permisos según sea necesario.</p>
<p><strong>Ejemplo</strong>:</p>
<ul>
<li>Creación de dos usuarios <code>uLectura</code> y <code>uEscritura</code> con diferentes contraseñas y permisos.</li>
</ul>
<pre tabindex="0"><code>CREATE LOGIN uLectura WITH PASSWORD = &#39;Segura123&#39;;

USE PaleteriaLaMichoacana;

CREATE USER uLectura FOR LOGIN uLectura;

GRANT SELECT TO uLectura;
DENY INSERT, UPDATE, DELETE TO uLectura;

EXEC sp_addrolemember &#39;db_datareader&#39;, &#39;uLectura&#39;;


CREATE LOGIN uEscritura WITH PASSWORD = &#39;OtraSegura123&#39;;

USE PaleteriaLaMichoacana;

CREATE USER uEscritura FOR LOGIN uEscritura;

GRANT SELECT, INSERT, UPDATE, DELETE TO uEscritura;

EXEC sp_addrolemember &#39;db_datawriter&#39;, &#39;uEscritura&#39;;
</code></pre><p>Para utilizar los usuarios en SQL Server Management Studio 20:</p>
<ol>
<li>Crear el usuario y ejecutar los comandos en la base de datos</li>
<li>Click derecho nombre de SQLEXPRESS en la barra de la izquierda, propiedades, seguridad y seleccionar SQL Server</li>
<li>En servicios de windows, buscar SQL Server (SQLEXPRESS) y reiniciar el servicio</li>
<li>Cambiar la autenticación al abrir SQL poner SQL SERVER Auth</li>
<li>Colocar login y password del usuario deseado</li>
<li>Seleccionar opcional</li>
<li>Entrar. Si hacemos uso de la BD podremos manipularla según se configuró el usuario.</li>
</ol>
<h3 id="24-consideraciones-de-una-bd-en-producción">2.4 Consideraciones de una BD en producción<a hidden class="anchor" aria-hidden="true" href="#24-consideraciones-de-una-bd-en-producción">#</a></h3>
<ol>
<li>Cada cuanto se respalda, a qué hora</li>
<li>Autenticación</li>
<li>Servidor en la nube o físico, cuidar mucho los accesos</li>
</ol>
<hr>
<h2 id="-más-información">/ Más Información<a hidden class="anchor" aria-hidden="true" href="#-más-información">#</a></h2>
<ul>
<li><a href="/apuntes/bases-de-datos-i---conceptos-b%C3%A1sicos/">Bases de Datos I - Conceptos Básicos</a></li>
<li><a href="/apuntes/bases-de-datos-ii---diagramas-y-documentaci%C3%B3n/">Bases de Datos II - Diagramas y Documentación</a></li>
<li><a href="/apuntes/bases-de-datos-iii---reglas-de-normalizaci%C3%B3n/">Bases de Datos III - Reglas de Normalización</a></li>
<li><a href="/apuntes/bases-de-datos-iv---%C3%A1lgebra-relacional/">Bases de Datos IV - Álgebra Relacional</a></li>
<li><a href="/apuntes/bases-de-datos-v---microsoft-sql/">Bases de Datos V - Microsoft SQL</a></li>
<li><a href="/apuntes/bases-de-datos-vi---estructura-b%C3%A1sica-de-sql/">Bases de Datos VI - Estructura Básica de SQL</a></li>
<li><a href="/apuntes/bases-de-datos-vii---consultas-de-datos/">Bases de Datos VII - Consultas de Datos</a></li>
<li><a href="/apuntes/bases-de-datos-viii---automatizaci%C3%B3n-y-seguridad/">Bases de Datos VIII - Automatización y Seguridad</a></li>
<li><a href="/apuntes/bases-de-datos-ix---operaciones-avanzadas-de-sql/">Bases de Datos IX - Operaciones Avanzadas de SQL</a></li>
</ul>
<hr>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/enciclopedia/">Enciclopedia</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">oscarzt20</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copiar';

        function copyingDone() {
            copybutton.innerHTML = '¡copiado!';
            setTimeout(() => {
                copybutton.innerHTML = 'copiar';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
